# =============================================================================
# MailZen EC2 Docker environment template
# -----------------------------------------------------------------------------
# Copy this file to: deploy/ec2/.env.ec2
# Then customize values (or run deploy/ec2/scripts/setup.sh).
# =============================================================================

# -----------------------------------------------------------------------------
# Public domain + HTTPS
# -----------------------------------------------------------------------------
MAILZEN_DOMAIN=mail.example.com
ACME_EMAIL=admin@example.com

# -----------------------------------------------------------------------------
# Frontend build-time public env (compiled into Next.js bundle)
# -----------------------------------------------------------------------------
NEXT_PUBLIC_GRAPHQL_ENDPOINT=https://mail.example.com/graphql
NEXT_PUBLIC_AUTH_ENABLED=true
NEXT_PUBLIC_ENABLE_EMAIL_WARMUP=true
NEXT_PUBLIC_ENABLE_SMART_REPLIES=true
NEXT_PUBLIC_ENABLE_EMAIL_TRACKING=true
NEXT_PUBLIC_DEFAULT_THEME=system

# -----------------------------------------------------------------------------
# Core app environment
# -----------------------------------------------------------------------------
NODE_ENV=production
PORT=4000
FRONTEND_URL=https://mail.example.com

# JWT secret MUST be >= 32 chars (backend enforces this at boot).
JWT_SECRET=replace_with_a_long_random_secret_min_32_chars_please_replace
JWT_EXPIRATION=86400
REFRESH_TTL_SECONDS=2592000
OAUTH_STATE_SECRET=replace_with_another_long_random_secret_min_32_chars

# Session cookie defaults for HTTPS deployment.
MAILZEN_SESSION_COOKIE_NAME=token
MAILZEN_SESSION_COOKIE_SAMESITE=lax
MAILZEN_SESSION_COOKIE_SECURE=true

# -----------------------------------------------------------------------------
# Database (Dockerized PostgreSQL)
# -----------------------------------------------------------------------------
POSTGRES_DB=mailzen
POSTGRES_USER=mailzen
POSTGRES_PASSWORD=replace_with_strong_postgres_password

# -----------------------------------------------------------------------------
# Redis (Dockerized)
# -----------------------------------------------------------------------------
REDIS_HOST=redis
REDIS_PORT=6379

# -----------------------------------------------------------------------------
# TypeORM production safety
# -----------------------------------------------------------------------------
TYPEORM_SYNCHRONIZE=false
TYPEORM_RUN_MIGRATIONS=true
TYPEORM_POOL_MAX=20
TYPEORM_IDLE_TIMEOUT_MS=30000

# -----------------------------------------------------------------------------
# Optional provider OAuth credentials (recommended for production)
# -----------------------------------------------------------------------------
GOOGLE_CLIENT_ID=
GOOGLE_CLIENT_SECRET=
GOOGLE_REDIRECT_URI=https://mail.example.com/auth/google/callback
GOOGLE_PROVIDER_REDIRECT_URI=https://mail.example.com/email-integration/google/callback

OUTLOOK_CLIENT_ID=
OUTLOOK_CLIENT_SECRET=
OUTLOOK_REDIRECT_URI=https://mail.example.com/auth/microsoft/callback
OUTLOOK_PROVIDER_REDIRECT_URI=https://mail.example.com/email-integration/microsoft/callback

# -----------------------------------------------------------------------------
# AI platform integration (enabled by default in compose)
# -----------------------------------------------------------------------------
AI_AGENT_PLATFORM_URL=http://ai-agent-platform:8100
AI_AGENT_PLATFORM_REQUIRED=false
AI_AGENT_PLATFORM_CHECK_ON_STARTUP=true
AI_AGENT_PLATFORM_KEY=replace_with_random_agent_platform_key

# -----------------------------------------------------------------------------
# Mail/provider secrets encryption (recommended hard requirement)
# -----------------------------------------------------------------------------
SECRETS_KEY=replace_with_strong_32_plus_char_secret_for_internal_encryption
PROVIDER_SECRETS_KEYRING=default:replace_with_strong_32_plus_char_provider_secret_key
PROVIDER_SECRETS_ACTIVE_KEY_ID=default

# -----------------------------------------------------------------------------
# SMTP defaults (optional; override as needed)
# -----------------------------------------------------------------------------
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USER=
SMTP_PASS=
